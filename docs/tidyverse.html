<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Using tidyverse | PSYC208 Take Home Assignments</title>
  <meta name="description" content="This is the companion website to my PSYC208 class." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Using tidyverse | PSYC208 Take Home Assignments" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the companion website to my PSYC208 class." />
  <meta name="github-repo" content="hueywoon/assignment" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Using tidyverse | PSYC208 Take Home Assignments" />
  
  <meta name="twitter:description" content="This is the companion website to my PSYC208 class." />
  

<meta name="author" content="Huey Woon LEE" />


<meta name="date" content="2022-03-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics.html"/>
<link rel="next" href="tha2.html"/>
<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PSYC208 Take Home Assignment</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> output: bookdown::gitbook<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> Install R and RStudio<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#the-rstudio-interface"><i class="fa fa-check"></i><b>1.2</b> The RStudio Interface<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-script"><i class="fa fa-check"></i><b>1.3</b> R Script<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#some-tips-and-tricks"><i class="fa fa-check"></i><b>1.4</b> Some Tips and Tricks<span></span></a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#softwrap-long-lines"><i class="fa fa-check"></i><b>1.4.1</b> Softwrap Long Lines<span></span></a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#using-r-projects"><i class="fa fa-check"></i><b>1.4.2</b> Using R Projects<span></span></a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#debugging"><i class="fa fa-check"></i><b>1.4.3</b> Debugging<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#some-basic-commands"><i class="fa fa-check"></i><b>2.1</b> Some Basic Commands<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#typing-and-executing-commands"><i class="fa fa-check"></i><b>2.2</b> Typing and Executing Commands<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#entering-data-directly-into-r"><i class="fa fa-check"></i><b>2.3</b> Entering Data Directly Into R<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Using tidyverse<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#installing-tidyverse"><i class="fa fa-check"></i><b>3.1</b> Installing tidyverse<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#load-tidyverse"><i class="fa fa-check"></i><b>3.2</b> Load tidyverse<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#import-data"><i class="fa fa-check"></i><b>3.3</b> Import Data<span></span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tidyverse.html"><a href="tidyverse.html#check-imported-dataset"><i class="fa fa-check"></i><b>3.3.1</b> Check Imported Dataset<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tidyverse.html"><a href="tidyverse.html#data-wrangling-with-dplyr-package"><i class="fa fa-check"></i><b>3.4</b> Data wrangling with dplyr package<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="tidyverse.html"><a href="tidyverse.html#select"><i class="fa fa-check"></i><b>3.4.1</b> Select()<span></span></a></li>
<li class="chapter" data-level="3.4.2" data-path="tidyverse.html"><a href="tidyverse.html#filter"><i class="fa fa-check"></i><b>3.4.2</b> Filter()<span></span></a></li>
<li class="chapter" data-level="3.4.3" data-path="tidyverse.html"><a href="tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.4.3</b> Mutate()<span></span></a></li>
<li class="chapter" data-level="3.4.4" data-path="tidyverse.html"><a href="tidyverse.html#summarise"><i class="fa fa-check"></i><b>3.4.4</b> Summarise()<span></span></a></li>
<li class="chapter" data-level="3.4.5" data-path="tidyverse.html"><a href="tidyverse.html#group_by"><i class="fa fa-check"></i><b>3.4.5</b> Group_by()<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tidyverse.html"><a href="tidyverse.html#forcats"><i class="fa fa-check"></i><b>3.5</b> forcats<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tha2.html"><a href="tha2.html"><i class="fa fa-check"></i><b>4</b> Assignment 2<span></span></a></li>
<li class="chapter" data-level="5" data-path="tha1.html"><a href="tha1.html"><i class="fa fa-check"></i><b>5</b> Assignment 1<span></span></a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSYC208 Take Home Assignments</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Using tidyverse<a href="tidyverse.html#tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The <code>tidyverse</code> is a collection of R packages that many data analysts use. In this course, we will be heavily relying on a few of the packages such as <code>readr</code>, <code>dplyr</code> and <code>ggplot2</code> that are in this collection. Instead of installing each package separately as we normally would, we can simply install <code>tidyverse</code> and that would install all the other packages that we want.</p>
<div id="installing-tidyverse" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Installing tidyverse<a href="tidyverse.html#installing-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="tidyverse.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Although we have installed tidyverse, we cannot use it unless we load it. To load it, we need the <code>library()</code> function.</p>
</div>
<div id="load-tidyverse" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Load tidyverse<a href="tidyverse.html#load-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="tidyverse.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p><em>Note.</em> You can temporarily load a package without using the <code>library()</code> function using the notation <code>package::function</code>. This tells R to load the package for this specific chunk of code and not for the entire session. This allows anyone who reads the code to know which package the function comes from. But I typically don’t do this because it can be quite tiresome to keep typing the name of the package over and over.</p>
<p>However, this notation comes in especially handy when we want to help R distinguish between two packages with the same function names. For example, the packages ggplot2 and psych both have a function <code>alpha()</code>. R doesn’t know which package to choose if you load both packages. So, to specify that you want to use the function from the psych package, you should type <code>psych::alpha()</code>.</p>
<p>Now that we have tidyverse loaded, let’s do stuff with it. Let’s start with importing data.</p>
</div>
<div id="import-data" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Import Data<a href="tidyverse.html#import-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Typically, R users do not have to enter their data into R directly. Instead, they already have their dataset in various formats, such as .csv, .txt, .sav, .xlsx, etc. So what they need to do is to import the dataset into R.</p>
<p>In this class, I typically use .csv files. To import .csv files, we can use the <code>read_csv()</code> function from the <code>readr</code> package in <code>tidyverse</code>. The data set that I will use here is a hypothetical one I created. You can download it here: <a href="Materialism.csv">Materialism.csv</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="tidyverse.html#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Materialism.csv&quot;</span>)</span>
<span id="cb3-2"><a href="tidyverse.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this code is saying...</span></span>
<span id="cb3-3"><a href="tidyverse.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the .csv file, &quot;Materialism.csv&quot; and assign it to &quot;data&quot;</span></span>
<span id="cb3-4"><a href="tidyverse.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># from now on, &quot;data&quot; will refer to the data in this csv file</span></span></code></pre></div>
<p>You may also use the built-in R function <code>read.csv()</code>. If you do so, you don’t have to load the <code>tidyverse</code> package. <code>read.csv()</code> is supposedly slower than <code>read_csv()</code>, which in turn is slower than <code>data.table</code>’s <code>fread()</code>. For our purposes, though, it really doesn’t matter which you use, so long as you can successfully import the data file.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="tidyverse.html#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Materialism.csv&quot;</span>)</span></code></pre></div>
<p>If you have other file types, such as .txt, .sav, .xlsx, you might need different packages. For example, for excel files (.xlsx), you will need the <code>readxl</code> package. For SPSS (.sav), you will need the <code>haven</code> package or the <code>foreign</code> package. For this class, I won’t use file types aside from .csv, but it is good to be aware of the packages to use if you want to import other file types.</p>
<div id="check-imported-dataset" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Check Imported Dataset<a href="tidyverse.html#check-imported-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before conducting any analyses, check that the dataset has been imported correctly. Go to the <code>Environment</code> pane (top right pane). Click <code>data</code>. The top left pane should show the imported data. Alternatively, you may type <code>View(data)</code> into the console.</p>
<ol style="list-style-type: decimal">
<li><strong>Rows</strong>: The data for each participant is recorded in a single row (e.g., data for Participant 1 is in Row 1)</li>
<li><strong>Columns</strong>: The data for each variable is recorded in a single column. Names of the variables are in the headers for each column</li>
</ol>
<p>Scroll down to ensure all rows have been imported correctly. There should be 99 rows. Scroll right to ensure all columns have been imported correctly. There should be 17 columns.</p>
<p>Another way to check the imported dataset is using the <code>str()</code> or the <code>glimpse()</code> functions. Both give you roughly similar information (e.g., that there are 99 rows and 17 columns, the names of the variables)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="tidyverse.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    99 obs. of  17 variables:
##  $ PIN            : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Gender         : chr  &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; ...
##  $ Income2lowhigh7: chr  &quot;low&quot; &quot;low&quot; &quot;high&quot; &quot;high&quot; ...
##  $ FB2016         : int  101 139 196 156 84 69 4 154 158 19 ...
##  $ FB2017         : int  140 134 171 207 121 55 40 217 201 57 ...
##  $ YT2016         : int  65 89 107 18 78 111 60 88 106 22 ...
##  $ YT2017         : int  79 80 90 8 55 110 60 30 117 25 ...
##  $ UserType       : int  1 2 3 1 2 3 1 2 3 1 ...
##  $ MVS01          : int  4 4 5 2 2 3 2 2 3 2 ...
##  $ MVS02          : int  3 3 4 3 2 4 3 3 4 3 ...
##  $ MVS03          : int  3 3 4 3 3 4 3 3 4 3 ...
##  $ MVS04          : int  3 3 3 2 2 5 4 4 3 4 ...
##  $ MVS05          : int  3 3 4 3 3 4 3 3 4 2 ...
##  $ MVS06          : int  4 4 5 2 2 3 4 4 5 2 ...
##  $ MVS07          : int  3 2 4 2 3 3 3 3 4 3 ...
##  $ MVS08          : int  4 4 5 4 4 5 3 3 4 3 ...
##  $ MVS09          : int  2 2 1 3 3 2 3 3 2 4 ...</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="tidyverse.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code></pre></div>
<pre><code>## Rows: 99
## Columns: 17
## $ PIN             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,~
## $ Gender          &lt;chr&gt; &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;fem~
## $ Income2lowhigh7 &lt;chr&gt; &quot;low&quot;, &quot;low&quot;, &quot;high&quot;, &quot;high&quot;, &quot;high&quot;, &quot;high&quot;, &quot;high&quot;, ~
## $ FB2016          &lt;int&gt; 101, 139, 196, 156, 84, 69, 4, 154, 158, 19, 64, 197, ~
## $ FB2017          &lt;int&gt; 140, 134, 171, 207, 121, 55, 40, 217, 201, 57, 47, 233~
## $ YT2016          &lt;int&gt; 65, 89, 107, 18, 78, 111, 60, 88, 106, 22, 27, 116, 10~
## $ YT2017          &lt;int&gt; 79, 80, 90, 8, 55, 110, 60, 30, 117, 25, 11, 104, 120,~
## $ UserType        &lt;int&gt; 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, ~
## $ MVS01           &lt;int&gt; 4, 4, 5, 2, 2, 3, 2, 2, 3, 2, 2, 3, 2, 2, 3, 3, 3, 4, ~
## $ MVS02           &lt;int&gt; 3, 3, 4, 3, 2, 4, 3, 3, 4, 3, 2, 4, 1, 3, 2, 3, 2, 4, ~
## $ MVS03           &lt;int&gt; 3, 3, 4, 3, 3, 4, 3, 3, 4, 3, 3, 4, 2, 2, 3, 4, 4, 5, ~
## $ MVS04           &lt;int&gt; 3, 3, 3, 2, 2, 5, 4, 4, 3, 4, 4, 4, 2, 2, 4, 3, 3, 4, ~
## $ MVS05           &lt;int&gt; 3, 3, 4, 3, 3, 4, 3, 3, 4, 2, 2, 3, 3, 3, 4, 4, 4, 5, ~
## $ MVS06           &lt;int&gt; 4, 4, 5, 2, 2, 3, 4, 4, 5, 2, 2, 3, 3, 3, 4, 2, 2, 3, ~
## $ MVS07           &lt;int&gt; 3, 2, 4, 2, 3, 3, 3, 3, 4, 3, 1, 4, 4, 1, 5, 1, 3, 2, ~
## $ MVS08           &lt;int&gt; 4, 4, 5, 4, 4, 5, 3, 3, 4, 3, 3, 4, 2, 2, 3, 3, 3, 4, ~
## $ MVS09           &lt;int&gt; 2, 2, 1, 3, 3, 2, 3, 3, 2, 4, 4, 3, 4, 4, 3, 3, 3, 2, ~</code></pre>
</div>
</div>
<div id="data-wrangling-with-dplyr-package" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Data wrangling with dplyr package<a href="tidyverse.html#data-wrangling-with-dplyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes, a data set can be overwhelming. We might want to, say, select specific columns to analyse. Or, we might only want to look at specific participants. Or we might want to create new variables from existing ones. All of these is made possible with functions in the <code>dplyr</code> package in <code>tidyverse</code>.</p>
<p>The functions we will use in this class from the <code>dplyr</code> package are as follows:</p>
<table>
<thead>
<tr class="header">
<th align="left">dplyr verbs</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">select()</td>
<td align="left">select specific columns</td>
</tr>
<tr class="even">
<td align="left">filter()</td>
<td align="left">filter (keep, select) specific rows</td>
</tr>
<tr class="odd">
<td align="left">mutate()</td>
<td align="left">create new columns</td>
</tr>
<tr class="even">
<td align="left">summarise()</td>
<td align="left">summarise values</td>
</tr>
<tr class="odd">
<td align="left">group_by()</td>
<td align="left">apply operations to different groups</td>
</tr>
</tbody>
</table>
<p>There are more functions in the dplyr package. You can check out the dplyr cheat sheet <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">HERE</a>.</p>
<div id="select" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Select()<a href="tidyverse.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This function allows us to select specific columns. This is especially useful if we have many columns to work with and we only want to focus on a few.</p>
<p>Let’s say we only want to select PIN, and the MVS01 to MVS09 columns, we can:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="tidyverse.html#cb9-1" aria-hidden="true" tabindex="-1"></a>MVS_only <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span>   <span class="co"># create the subset called &quot;MVS_only&quot; from &quot;data&quot;</span></span>
<span id="cb9-2"><a href="tidyverse.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PIN, MVS01<span class="sc">:</span>MVS09)  <span class="co"># and select only PIN and the columns MVS01 to MVS09</span></span></code></pre></div>
<p>This is what the first six rows of MVS_only should look like:</p>
<pre><code>##   PIN MVS01 MVS02 MVS03 MVS04 MVS05 MVS06 MVS07 MVS08 MVS09
## 1   1     4     3     3     3     3     4     3     4     2
## 2   2     4     3     3     3     3     4     2     4     2
## 3   3     5     4     4     3     4     5     4     5     1
## 4   4     2     3     3     2     3     2     2     4     3
## 5   5     2     2     3     2     3     2     3     4     3
## 6   6     3     4     4     5     4     3     3     5     2</code></pre>
<p>Although <code>select()</code> is used to select specific columns, I sometimes also use it to re-arrange the order of the columns. (In <code>dplyr</code>, the function to re-arrange the order of the columns is <code>arrange()</code>, which also helps you re-arrange rows in addition to columns)</p>
<p>Let’s say we want the MVS01 to MVS09 columns to come <em>before</em> PIN. We can:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tidyverse.html#cb11-1" aria-hidden="true" tabindex="-1"></a>MVS_Pinfirst <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span>   </span>
<span id="cb11-2"><a href="tidyverse.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(MVS01<span class="sc">:</span>MVS09, PIN)  </span></code></pre></div>
<p>This is what the first six rows of MVS_Pinfirst should look like:</p>
<pre><code>##   MVS01 MVS02 MVS03 MVS04 MVS05 MVS06 MVS07 MVS08 MVS09 PIN
## 1     4     3     3     3     3     4     3     4     2   1
## 2     4     3     3     3     3     4     2     4     2   2
## 3     5     4     4     3     4     5     4     5     1   3
## 4     2     3     3     2     3     2     2     4     3   4
## 5     2     2     3     2     3     2     3     4     3   5
## 6     3     4     4     5     4     3     3     5     2   6</code></pre>
</div>
<div id="filter" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Filter()<a href="tidyverse.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, we want to select specific kinds of participants to do our analyses on (e.g., say from specific conditions, or maybe only male or female participants). We use <code>filter()</code> to select those. New R users sometimes confuse <code>select()</code> with <code>filter()</code>. I like to differentiate them this way: <code>filter()</code> is used to select rows whereas <code>select()</code> is used to select columns.</p>
<p>So, let’s say we want to select only male participants.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="tidyverse.html#cb13-1" aria-hidden="true" tabindex="-1"></a>male_only <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span>    <span class="co"># create &quot;male_only&quot; from &quot;data&quot;, </span></span>
<span id="cb13-2"><a href="tidyverse.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">&quot;male&quot;</span>)  <span class="co"># then filter (keep) only male participants</span></span></code></pre></div>
<p>Notice that the double equal sign <code>==</code> is used here. In programming languages, the <code>==</code> sign is used when we are comparing the left and the right hand side. Here, we’re comparing each row under the column <code>Gender</code> to the word “male”. If that row matches the word “male”, we will filter (keep) that row. Otherwise, we will toss it out.</p>
<p>This is what the first six rows of male_only should look like:</p>
<pre><code>##   PIN Gender Income2lowhigh7 FB2016 FB2017 YT2016 YT2017 UserType MVS01 MVS02
## 1  51   male             low    163    201    113    118        3     4     4
## 2  52   male            high    156    213     82     30        1     2     3
## 3  53   male            high    181    234     99    128        2     2     1
## 4  54   male            high    213    196     92     90        3     3     4
## 5  55   male             low    168    144    102    117        1     4     1
## 6  56   male             low    236    162    107    101        2     4     2
##   MVS03 MVS04 MVS05 MVS06 MVS07 MVS08 MVS09
## 1     5     5     4     4     5     4     1
## 2     4     2     2     3     2     2     3
## 3     4     2     2     3     2     2     3
## 4     5     3     3     4     3     3     2
## 5     4     4     4     4     4     4     2
## 6     4     4     4     4     3     4     2</code></pre>
</div>
<div id="mutate" class="section level3 hasAnchor" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Mutate()<a href="tidyverse.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, we might want to create new variables, say averages or totals.</p>
<p>Let’s say we want to find the average of time spent on YouTube in the two years. To help us make the data set more manageable, maybe we first select the variables PIN, YT2016, and YT2017. Then, we create an average called average_YT from YT2016 and YT2017.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="tidyverse.html#cb15-1" aria-hidden="true" tabindex="-1"></a>with_average <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="tidyverse.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PIN, YT2016, YT2017) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="tidyverse.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">average_YT =</span> (YT2016 <span class="sc">+</span> YT2017) <span class="sc">/</span> <span class="dv">2</span>)</span></code></pre></div>
<p>The first 6 rows of with_average looks like this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="tidyverse.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(with_average)</span></code></pre></div>
<pre><code>##   PIN YT2016 YT2017 average_YT
## 1   1     65     79       72.0
## 2   2     89     80       84.5
## 3   3    107     90       98.5
## 4   4     18      8       13.0
## 5   5     78     55       66.5
## 6   6    111    110      110.5</code></pre>
</div>
<div id="summarise" class="section level3 hasAnchor" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Summarise()<a href="tidyverse.html#summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>summarise()</code> function creates summary statistics for a given column in the data frame such as the mean, median, maximum, minimum, etc.</p>
<p>Let’s say we’re interested to know the mean, minimum, maximum, variance, standard deviation, total number of participants for the variable YT2017.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="tidyverse.html#cb18-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="tidyverse.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_YT2017 =</span> <span class="fu">mean</span>(YT2017), </span>
<span id="cb18-3"><a href="tidyverse.html#cb18-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_YT2017 =</span> <span class="fu">min</span>(YT2017), </span>
<span id="cb18-4"><a href="tidyverse.html#cb18-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_YT2017 =</span> <span class="fu">max</span>(YT2017), </span>
<span id="cb18-5"><a href="tidyverse.html#cb18-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">var_YT2017 =</span> <span class="fu">var</span>(YT2017), </span>
<span id="cb18-6"><a href="tidyverse.html#cb18-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_YT2017 =</span> <span class="fu">sd</span>(YT2017), </span>
<span id="cb18-7"><a href="tidyverse.html#cb18-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">total =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>##   avg_YT2017 min_YT2017 max_YT2017 var_YT2017 sd_YT2017 total
## 1   68.60606          3        128   1231.894  35.09835    99</code></pre>
</div>
<div id="group_by" class="section level3 hasAnchor" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Group_by()<a href="tidyverse.html#group_by" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>group_by()</code> verb allows us to split the data frame by some variable, apply a function to each data frame and then combine the output. For example, we can split the data frame by gender and then find the summary statistics for YT2017 for male and female separately.</p>
<p>Let’s say we’re interested to know the mean, minimum, maximum, variance, standard deviation, total number of participants for the variable YT2017.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="tidyverse.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="tidyverse.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_YT2017 =</span> <span class="fu">mean</span>(YT2017), </span>
<span id="cb20-4"><a href="tidyverse.html#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_YT2017 =</span> <span class="fu">min</span>(YT2017), </span>
<span id="cb20-5"><a href="tidyverse.html#cb20-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_YT2017 =</span> <span class="fu">max</span>(YT2017), </span>
<span id="cb20-6"><a href="tidyverse.html#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">var_YT2017 =</span> <span class="fu">var</span>(YT2017), </span>
<span id="cb20-7"><a href="tidyverse.html#cb20-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_YT2017 =</span> <span class="fu">sd</span>(YT2017), </span>
<span id="cb20-8"><a href="tidyverse.html#cb20-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">total =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 x 7
##   Gender avg_YT2017 min_YT2017 max_YT2017 var_YT2017 sd_YT2017 total
##   &lt;chr&gt;       &lt;dbl&gt;      &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
## 1 female       66.1          3        120      1188.      34.5    50
## 2 male         71.1          7        128      1289.      35.9    49</code></pre>
<p>Reference: <a href="http://genomicsclass.github.io/book/pages/dplyr_tutorial.html">http://genomicsclass.github.io/book/pages/dplyr_tutorial.html</a></p>
</div>
</div>
<div id="forcats" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> forcats<a href="tidyverse.html#forcats" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tha2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hueywoon/assignment/blob/master/02-tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
